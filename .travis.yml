language: csharp
script: |
    cd "$TRAVIS_BUILD_DIR"
    #
    # clone + update
    #
    git clone -b gh-pages "https://github.com/saferpay/jsonapi.git" _gh_pages
    cp -r assets/* _gh_pages/assets
    mono libs/GitHubPagesGenerator.exe -i "$TRAVIS_BUILD_DIR" -s "$TRAVIS_BUILD_DIR/Sitemap.json" -c "$TRAVIS_BUILD_DIR" -o _gh_pages -t "JSON API Spec-Version 1.14"  || travis_terminate 1
    cd _gh_pages
    #
    # show result
    #
    ls
    #
    # commit + push changes
    #
    git add -v --all .
    git -c user.name='saferpaybot' -c user.email='saferpaybot@six-group.com' commit -m 'Update Github Pages'
    git push -f -q "https://saferpaybot:${GITHUB_PERSONAL_ACCESS_TOKEN}@github.com/saferpay/jsonapi.git" gh-pages || travis_terminate 1
    cd "$TRAVIS_BUILD_DIR"
