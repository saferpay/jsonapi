# <a name="ChapterManagementApi"></a>Management API

This interface offers REST based access to various management features.
This enables customers to integrate those features into their systems on a technical level.

<div class="info">
    <p>
        <strong>Important Note:</strong>
        The Saferpay Management API does not use the JSON API header.
        Instead, some additional HTTP header fields are required.
    </p>
</div>

<h3>Additional HTTP Headers</h3>

Instead of the `RequestHeader` container used in the JSON API, the Management API uses additional HTTP Headers to store and transfer general information about the request.
All other requirements regarding the HTTP Headers (e.g. for <a href="#encoding">content encoding</a> and <a href="#authentication">authentication</a>) still apply.

<table class="table">
  <thead>
    <tr>
      <th>Header field</th>
      <th>Possible values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="white-space:nowrap;">Saferpay-ApiVersion</td>
      <td>
        1.14
      </td>
      <td>Version number of the interface specification.</td>
    </tr>
    <tr>
      <td style="white-space:nowrap;">Saferpay-RequestId</td>
      <td>
        <samp style="white-space:nowrap;">Id[1..50]</samp>
      </td>
      <td>Id generated by merchant system, for debugging purposes. Should be unique for each new request. If a request is retried due to an error, use the same request id.</td>
    </tr>
  </tbody>
</table>

--->>>

HTTP Headers example:

`Saferpay-ApiVersion: 1.14`

`Saferpay-RequestId: 33e8af17-35c1-4165-a343-c1c86a320f3b`

<<<---


## <a name="rest_customers_terminals_fields-access-tokens"></a>HostedFieldsAccessToken CreateAccessToken

Create a Saferpay Fields Access Token that can be used to integrate Saferpay Fields into web pages and is restricted to the given customerId, terminalId and URL(s).

--->>>

<div class="info"><p><strong>Request URL:</strong></p><p><strong>POST:</strong> /rest/customers/[customerId]/terminals/[terminalId]/fields-access-tokens</p></div>

<<<---

#### Request




<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>SourceUrls</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				string[]
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">The fully qualified URL of the shop (the page that integrates Saferpay Fields). We recommend that URLs end with a trailing slash. Only HTTPS is allowed.</div>
	<i class="small text-muted">
				    <span>Example: <code>https://yourshop.com/</code></span>
	</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>Description</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				string
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">A human readable description that will be shown in the Saferpay Backoffice to easily identify the Access Token.</div>
	<i class="small text-muted">
Utf8[1..128]<br />
			</i>
</td>
				</tr>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
{
  "SourceUrls": [
    "https://a.yourshop.com/",
    "https://b.yourshop.com/"
  ],
  "Description": "Saferpay Fields Access Token for YourShop"
}
</pre>

<<<---

#### Response




<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>AccessToken</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				string
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">The AccessToken for the Saferpay Fields JavaScript library</div>
	<i class="small text-muted">
				    <span>Example: <code>67f47961-2912-4338-8039-22ac2b8486f3</code></span>
	</i>
</td>
				</tr>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
{
  "AccessToken": "67f47961-2912-4338-8039-22ac2b8486f3"
}
</pre>

<<<---





## <a name="rest_customers_terminals_spg-offers"></a>SecurePayGate Offers

This function may be used to create a SecurePayGate (SPG) offer

--->>>

<div class="info"><p><strong>Request URL:</strong></p><p><strong>POST:</strong> /rest/customers/[customerId]/terminals/[terminalId]/spg-offers</p></div>

<<<---

#### Request




<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>Payment</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				
				<a class="type-details in" href="#RestApi_Models_Data_Payment">object</a>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Information about the payment (amount, currency, ...)</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>ExpirationDate</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				string
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">The date until the offer should be valid in ISO 8601.<br> YYYY-MM-DD<br> Must be within the next 180 days.</div>
	<i class="small text-muted">
AlphaNumeric[10..10]<br />
				    <span>Example: <code>2019-10-20</code></span>
	</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>ConfigSet</strong><br />
	<span class="text-muted small">
				string
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">This parameter lets you define your payment page config (PPConfig) by name. If this parameter is not set, your default PPConfig will be applied if available.<br> When the PPConfig can't be found (e.g. wrong name), the Saferpay basic style will be applied to the payment page.</div>
	<i class="small text-muted">
Id[1..20]<br />
				    <span>Example: <code>name of your payment page config (case-insensitive)</code></span>
	</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>Payer</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				
				<a class="type-details in" href="#Common_Models_Data_SpgPayer">object</a>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Information about the payer</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>BillingAddressForm</strong><br />
	<span class="text-muted small">
				
				<a class="type-details in" href="#Common_Models_Data_SpgBillingAddressForm">object</a>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Used to have the payer enter or change his billing address in the payment process.</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>RegisterAlias</strong><br />
	<span class="text-muted small">
				
				<a class="type-details in" href="#RestApi_Models_Data_RegisterAlias">object</a>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Controls whether the means of payment used for paying the offer should be stored inside the Saferpay Secure Card Data storage.<br> If the offer is paid using a payment means that does not support being stored in the Secure Card Data storage, this parameter has no effect.</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>Order</strong><br />
	<span class="text-muted small">
				
				<a class="type-details in" href="#RestApi_Models_Data_Order">object</a>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Optional order information</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
{
  "Payment": {
    "Amount": {
      "Value": "404",
      "CurrencyCode": "CHF"
    },
    "OrderId": "094c2a7ce1374f7ca184591f123b154d",
    "Options": {
      "PreAuth": true
    }
  },
  "ExpirationDate": "2020-04-23",
  "Payer": {
    "LanguageCode": "de",
    "BillingAddress": {
      "FirstName": "John",
      "LastName": "Doe",
      "Company": "Worldline",
      "Gender": "MALE",
      "Street": "Mustergasse 123",
      "Zip": "8008",
      "City": "Zurich",
      "CountryCode": "CH",
      "Email": "payer@provider.com"
    }
  }
}
</pre>

<<<---

#### Response




<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>OfferId</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				globally unique identifier
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">The Id of the SecurePayGate offer</div>
	<i class="small text-muted">
				    <span>Example: <code>503a3d7b-072b-400f-9e7e-8ec15191c737</code></span>
	</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>PaymentLink</strong><br />
	<span class="text-muted small">
			<span>
				<span class="text-mandatory">mandatory</span>,
			</span>
				string
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">The SecurePayGate link for the payment</div>
	<i class="small text-muted">
				    <span>Example: <code>https://www.saferpay.com/SecurePayGate/Payment/123456/12345678/503a3d7b-072b-400f-9e7e-8ec15191c737</code></span>
	</i>
</td>
				</tr>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
{
  "OfferId": "503a3d7b-072b-400f-9e7e-8ec15191c737",
  "PaymentLink": "https://www.saferpay.com/SecurePayGate/Payment/123456/12345678/503a3d7b-072b-400f-9e7e-8ec15191c737"
}
</pre>

<<<---





## <a name="rest_customers_terminals_payment-methods"></a>TerminalInfo PaymentMethods

This method is used to retrieve a list of all available payment methods and wallets for a terminal

--->>>

<div class="info"><p><strong>Request URL:</strong></p><p><strong>GET:</strong> /rest/customers/[customerId]/terminals/[terminalId]/payment-methods</p></div>

<<<---

#### Request


No body needed

<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
No example available
</pre>

<<<---

#### Response




<table class="table">
	<thead>
		<tr>
			<th colspan="2">Arguments</th>
		</tr>
	</thead>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>PaymentMethods</strong><br />
	<span class="text-muted small">
				
				<span>array of <a class="type-details in" href="#RestApi_Models_PaymentMethodInfo">object</a>s</span>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Array of payment methods that are available for the terminal</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>
				<tr>
					<td class="col-sm-4 text-right">
	<strong>Wallets</strong><br />
	<span class="text-muted small">
				
				<span>array of <a class="type-details in" href="#RestApi_Models_WalletInfo">object</a>s</span>
	</span>
</td>
<td class="col-sm-8">
	<div style="padding-bottom: 10px">Array of wallets that are available for the terminal</div>
	<i class="small text-muted">
			</i>
</td>
				</tr>

</table>


--->>>

<p>Example:</p>
<pre class="prettyprint">
{
  "PaymentMethods": [
    {
      "PaymentMethod": "VISA",
      "Currencies": [
        "USD"
      ],
      "LogoUrl": "https://www.saferpay.com/static/logo/visa.svg?v=637381079349290910"
    },
    {
      "PaymentMethod": "MASTERCARD",
      "Currencies": [
        "EUR",
        "CHF"
      ],
      "LogoUrl": "https://www.saferpay.com/static/logo/mastercard.svg?v=637381079349290910"
    },
    {
      "PaymentMethod": "MAESTRO",
      "Currencies": [
        "EUR"
      ],
      "LogoUrl": "https://www.saferpay.com/static/logo/maestro.svg?v=637381079349290910"
    },
    {
      "PaymentMethod": "PAYPAL",
      "Currencies": [
        "EUR",
        "CHF",
        "USD"
      ],
      "LogoUrl": "https://www.saferpay.com/static/logo/paypal.svg?v=637381079349290910"
    }
  ],
  "Wallets": [
    {
      "WalletName": "APPLEPAY",
      "LogoUrl": "https://www.saferpay.com/static/logo/applepay.svg?v=637381079349290910"
    },
    {
      "WalletName": "GOOGLEPAY",
      "LogoUrl": "https://www.saferpay.com/static/logo/googlepay.svg?v=637381079349290910"
    }
  ]
}
</pre>

<<<---






